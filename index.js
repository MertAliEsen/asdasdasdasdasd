// Requirements
const Discord = require("discord.js");
const client = new Discord.Client();
const chalk = require('chalk');
const disbut = require("discord-buttons");
const config = require('./cfg/config.json')
const fs = require("fs");
disbut(client);
const Enmap = require("enmap");
var request = require("request");
const moment = require("moment");
const db = require('quick.db');
client.commands = new Enmap();
client.config = config;
const ayarlar = require('./ayarlar.json');
const jsonfile = require("jsonfile");
const file = "./cfg/config.json";
const file2 = "./cfg/config2.json";
// Update Check
        var takim1 = jsonfile.readFileSync(file).takim1;

const express = require('express');
const http = require('http');
const app = express();
  app.get("/", (request, response) => {
  console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI");
  response.sendStatus(200);
});
setInterval(() => {
  http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);
}, 30000);
  app.get("/", (request, response) => {
  console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI");
  response.sendStatus(200);
});
setInterval(() => {
  http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);
}, 30000);
  app.get("/", (request, response) => {
  console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI");
  response.sendStatus(200);
});
setInterval(() => {
  http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);
}, 30000);
  app.get("/", (request, response) => {
  console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI");
  response.sendStatus(200);
});
setInterval(() => {
  http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);
}, 30000);
  app.get("/", (request, response) => {
  console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI");
  response.sendStatus(200);
});
setInterval(() => {
  http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);
}, 30000);
  app.get("/", (request, response) => {
  console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI");
  response.sendStatus(200);
});
setInterval(() => {
  http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);
}, 30000);
  app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);app.get("/", (request, response) => {console.log(Date.now() + "7/24 AKTİF TUTMA İŞLEMİ BAŞARILI"); response.sendStatus(200);});setInterval(() => {http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);}, 10000);
// Check if version matches request.
  client.on("ready", () => {
     setInterval(() => {

    var durum = db.get("durum")
       client.user.setActivity(`${durum}`, { type: 'PLAYING' });
       }, 3000);
      console.log(chalk.blue(`${client.user.username} is ready. (${client.guilds.cache.size} Guilds) | Prefix: ${ayarlar.prefix}`));

//client.user.setStatus("dnd")
      //  client.user.setActivity(`Hazırlanıyor abiler, ablalar hazır olun 🔥`, { type: 'PLAYING' });

    // client.user.setActivity(`Loading... ▓▓▓▓░ %80 Completed`, { type: 'PLAYING' });
  });

  // Load Express Webserver
  fs.readdir("./events/", (err, files) => {
    if (err) return console.error(err);
    files.forEach(file => {
      const event = require(`./events/${file}`);
      let eventName = file.split(".")[0];
      client.on(eventName, event.bind(null, client));
    });
  });

  // Commands Load
  client.commands = new Enmap();
  fs.readdir("./commands/", (err, files) => {
    if (err) return console.error(err);
    console.log(chalk.magenta("Loading Commands..."))
    files.forEach(file => {
      if (!file.endsWith(".js")) return;
      let props = require(`./commands/${file}`);
      let commandName = file.split(".")[0];
      console.log(chalk.green(`[+] ${commandName}`));
      client.commands.set(commandName, props);
    });
  });

  // Login our BOT
  client.login(process.env.token);


// Versions do not match (exit)



client.on('guildMemberAdd', member => {
  http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);
  let sistem = db.fetch(`otorol_${member.guild.id}`)
  if(sistem === 'acik'){
    let aylartoplam = {
    "01": "Ocak",
    "02": "Şubat",
    "03": "Mart",
    "04": "Nisan",
    "05": "Mayıs",
    "06": "Haziran",
    "07": "Temmuz",
    "08": "Ağustos",
    "09": "Eylül",
    "10": "Ekim",
    "11": "Kasım",
    "12": "Aralık"
    };
      let aylar = aylartoplam;

  let user = client.users.cache.get(member.id);
  require("moment-duration-format");

  const kurulus = new Date().getTime() - user.createdAt.getTime();
  const ayyy = moment.duration(kurulus).format("M");
      let guild = member.guild;
  var kontrol = [];

  if (ayyy < 1) {
    kontrol = "**Şüpheli** ";
  }
  if (ayyy > 1) {
    kontrol = "**Güvenilir** ";
  }
    let rol = db.fetch(`orol_${member.guild.id}`)
    let kanal = db.fetch(`okanal_${member.guild.id}`)
    member.roles.add(rol)
    client.channels.cache.get(kanal).send(
      new Discord.MessageEmbed()
.setColor('#356384')

      .setDescription(` **Hoş geldin!** __**${
        member.user.tag
      }**__, seninle beraber **${
        guild.memberCount
      }** kişi olduk! \n  Otomatik Rolün Verildi. \n  Hesap kuruluş tarihi: **${moment(
        user.createdAt
      ).format("DD")} ${aylar[moment(user.createdAt).format("MM")]} ${moment(
        user.createdAt
      ).format(
        "YYYY HH:mm:ss"
       )}** \n  Bu vatandaş: ${kontrol} `) 
    )} else if(sistem != "acik") {
    return;
  }
}) 

//////////////////////////////
client.on('guildMemberRemove', member => {
  http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);
  
  let sistem = db.fetch(`otorol_${member.guild.id}`)
  if(sistem === 'acik'){

  let user = client.users.cache.get(member.id);
      let guild = member.guild;

    let kanal = db.fetch(`okanal_${member.guild.id}`)
    client.channels.cache.get(kanal).send(
      new Discord.MessageEmbed()
.setColor('#356384')

      .setDescription(` **Görüşürüz Dostum!** __**${
        member.user.tag
      }**__, sen çıkınca **${
        guild.memberCount
      }** kişi kaldık :(`) 
    )} else if(sistem != "acik") {
    return;
  }
})




//ModLog Baş



client.on("messageDelete", async message => {
  if (message.author.bot || message.channel.type == "dm") return;

  let log = message.guild.channels.cache.get(
    await db.fetch(`log_${message.guild.id}`)
  );

  if (!log) return;

  const embed = new Discord.MessageEmbed()

    .setTitle(message.author.username + " | Mesaj Silindi")

    .addField("Kullanıcı: ", message.author)

    .addField("Kanal: ", message.channel)

    .addField("Mesaj: ", "" + message.content + "");

  log.send(embed);
});

client.on("messageUpdate", async (oldMessage, newMessage) => {
  let modlog = await db.fetch(`log_${oldMessage.guild.id}`);

  if (!modlog) return;

  let embed = new Discord.MessageEmbed()

    .setAuthor(oldMessage.author.username, oldMessage.author.avatarURL())

    .addField("**Eylem:**", "Mesaj Düzenleme")

    .addField(
      "**Mesajın sahibi:**",
      `<@${oldMessage.author.id}> === **${oldMessage.author.id}**`
    )

    .addField("**Eski Mesajı:**", `${oldMessage.content}`)

    .addField("**Yeni Mesajı:**", `${newMessage.content}`)

    .setTimestamp()

    .setColor("#ff0000")

    .setFooter(
      `Sunucu: ${oldMessage.guild.name} - ${oldMessage.guild.id}`,
      oldMessage.guild.iconURL()
    )

    .setThumbnail(oldMessage.guild.iconURL);

  client.channels.cache.get(modlog).send(embed);
});

client.on("channelCreate", async channel => {
  let modlog = await db.fetch(`log_${channel.guild.id}`);

  if (!modlog) return;

  const entry = await channel.guild
    .fetchAuditLogs({ type: "CHANNEL_CREATE" })
    .then(audit => audit.entries.first());

  let kanal;

  if (channel.type === "text") kanal = `<#${channel.id}>`;

  if (channel.type === "voice") kanal = `\`${channel.name}\``;

  let embed = new Discord.MessageEmbed()

    .setAuthor(entry.executor.username, entry.executor.avatarURL())

    .addField("**Eylem:**", "Kanal Oluşturma")

    .addField("**Kanalı Oluşturan Kişi:**", `<@${entry.executor.id}>`)

    .addField("**Oluşturduğu Kanal:**", `${kanal}`)

    .setTimestamp()

    .setColor("#ff0000")

    .setFooter(
      `Sunucu: ${channel.guild.name} - ${channel.guild.id}`,
      channel.guild.iconURL()
    )

    .setThumbnail(channel.guild.iconUR);

  client.channels.cache.get(modlog).send(embed);
});

client.on("channelDelete", async channel => {
  let modlog = await db.fetch(`log_${channel.guild.id}`);

  if (!modlog) return;

  const entry = await channel.guild
    .fetchAuditLogs({ type: "CHANNEL_DELETE" })
    .then(audit => audit.entries.first());

  let embed = new Discord.MessageEmbed()

    .setAuthor(entry.executor.username, entry.executor.avatarURL())

    .addField("**Eylem:**", "Kanal Silme")

    .addField("**Kanalı Silen Kişi:**", `<@${entry.executor.id}>`)

    .addField("**Silinen Kanal:**", `\`${channel.name}\``)

    .setTimestamp()

    .setColor("#ff0000")

    .setFooter(
      `Sunucu: ${channel.guild.name} - ${channel.guild.id}`,
      channel.guild.iconURL()
    )

    .setThumbnail(channel.guild.iconURL);

  client.channels.cache.get(modlog).send(embed);
});

client.on("roleCreate", async role => {
  let modlog = await db.fetch(`log_${role.guild.id}`);

  if (!modlog) return;

  const entry = await role.guild
    .fetchAuditLogs({ type: "ROLE_CREATE" })
    .then(audit => audit.entries.first());

  let embed = new Discord.MessageEmbed()

    .setAuthor(entry.executor.username, entry.executor.avatarURL())

    .addField("**Eylem:**", "Rol Oluşturma")

    .addField("**Rolü Oluşturan Kişi:**", `<@${entry.executor.id}>`)

    .addField("**Oluşturulan Rol:**", `\`${role.name}\` **=** \`${role.id}\``)

    .setTimestamp()

    .setFooter(
      `Sunucu: ${role.guild.name} - ${role.guild.id}`,
      role.guild.iconURL
    )

    .setColor("#ff0000")

    .setThumbnail(role.guild.iconURL);

  client.channels.cache.get(modlog).send(embed);
});

client.on("roleDelete", async role => {
  let modlog = await db.fetch(`log_${role.guild.id}`);

  if (!modlog) return;

  const entry = await role.guild
    .fetchAuditLogs({ type: "ROLE_DELETE" })
    .then(audit => audit.entries.first());

  let embed = new Discord.MessageEmbed()

    .setAuthor(entry.executor.username, entry.executor.avatarURL())

    .addField("**Eylem:**", "Rol Silme")

    .addField("**Rolü Silen Kişi:**", `<@${entry.executor.id}>`)

    .addField("**Silinen Rol:**", `\`${role.name}\` **=** \`${role.id}\``)

    .setTimestamp()

    .setFooter(
      `Sunucu: ${role.guild.name} - ${role.guild.id}`,
      role.guild.iconURL
    )

    .setColor("#ff0000")

    .setThumbnail(role.guild.iconURL);

  client.channels.cache.get(modlog).send(embed);
});

client.on("emojiCreate", async emoji => {
  let modlog = await db.fetch(`log_${emoji.guild.id}`);

  if (!modlog) return;

  const entry = await emoji.guild
    .fetchAuditLogs({ type: "EMOJI_CREATE" })
    .then(audit => audit.entries.first());

  let embed = new Discord.MessageEmbed()

    .setAuthor(entry.executor.username, entry.executor.avatarURL())

    .addField("**Eylem:**", "Emoji Oluşturma")

    .addField("**Emojiyi Oluşturan Kişi:**", `<@${entry.executor.id}>`)

    .addField("**Oluşturulan Emoji:**", `${emoji} - İsmi: \`${emoji.name}\``)

    .setTimestamp()

    .setColor("#ff0000")

    .setFooter(
      `Sunucu: ${emoji.guild.name} - ${emoji.guild.id}`,
      emoji.guild.iconURL
    )

    .setThumbnail(emoji.guild.iconURL);

  client.channels.cache.get(modlog).send(embed);
});

client.on("emojiDelete", async emoji => {
  let modlog = await db.fetch(`log_${emoji.guild.id}`);

  if (!modlog) return;

  const entry = await emoji.guild
    .fetchAuditLogs({ type: "EMOJI_DELETE" })
    .then(audit => audit.entries.first());

  let embed = new Discord.MessageEmbed()

    .setAuthor(entry.executor.username, entry.executor.avatarURL())

    .addField("**Eylem:**", "Emoji Silme")

    .addField("**Emojiyi Silen Kişi:**", `<@${entry.executor.id}>`)

    .addField("**Silinen Emoji:**", `${emoji}`)

    .setTimestamp()

    .setFooter(
      `Sunucu: ${emoji.guild.name} - ${emoji.guild.id}`,
      emoji.guild.iconURL
    )

    .setColor("#ff0000")

    .setThumbnail(emoji.guild.iconURL);

  client.channels.cache.get(modlog).send(embed);
});

client.on("emojiUpdate", async (oldEmoji, newEmoji) => {
  let modlog = await db.fetch(`log_${oldEmoji.guild.id}`);

  if (!modlog) return;

  const entry = await oldEmoji.guild
    .fetchAuditLogs({ type: "EMOJI_UPDATE" })
    .then(audit => audit.entries.first());

  let embed = new Discord.MessageEmbed()

    .setAuthor(entry.executor.username, entry.executor.avatarURL())

    .addField("**Eylem:**", "Emoji Güncelleme")

    .addField("**Emojiyi Güncelleyen Kişi:**", `<@${entry.executor.id}>`)

    .addField(
      "**Güncellenmeden Önceki Emoji:**",
      `${oldEmoji} - İsmi: \`${oldEmoji.name}\``
    )

    .addField(
      "**Güncellendikten Sonraki Emoji:**",
      `${newEmoji} - İsmi: \`${newEmoji.name}\``
    )

    .setTimestamp()

    .setColor("#ff0000")

    .setFooter(
      `Sunucu: ${oldEmoji.guild.name} - ${oldEmoji.guild.id}`,
      oldEmoji.guild.iconURL
    )

    .setThumbnail(oldEmoji.guild.iconURL);

  client.channels.cache.get(modlog).send(embed);
});

client.on("guildBanAdd", async (guild, user) => {
  let modlog = await db.fetch(`log_${guild.id}`);

  if (!modlog) return;

  const entry = await guild
    .fetchAuditLogs({ type: "MEMBER_BAN_ADD" })
    .then(audit => audit.entries.first());

  let embed = new Discord.MessageEmbed()

    .setAuthor(entry.executor.username, entry.executor.avatarURL())

    .addField("**Eylem:**", "Yasaklama")

    .addField("**Kullanıcıyı Yasaklayan Yetkili:**", `<@${entry.executor.id}>`)

    .addField("**Yasaklanan Kullanıcı:**", `**${user.tag}** - ${user.id}`)

    .addField("**Yasaklanma Sebebi:**", `${entry.reason}`)

    .setTimestamp()

    .setColor("#ff0000")

    .setFooter(`Sunucu: ${guild.name} - ${guild.id}`, guild.iconURL)

    .setThumbnail(guild.iconURL);

  client.channels.cache.get(modlog).send(embed);
});

client.on("guildBanRemove", async (guild, user) => {
  let modlog = await db.fetch(`log_${guild.id}`);

  if (!modlog) return;

  const entry = await guild
    .fetchAuditLogs({ type: "MEMBER_BAN_REMOVE" })
    .then(audit => audit.entries.first());

  let embed = new Discord.MessageEmbed()

    .setAuthor(entry.executor.username, entry.executor.avatarURL())

    .addField("**Eylem:**", "Yasak Kaldırma")

    .addField("**Yasağı Kaldıran Yetkili:**", `<@${entry.executor.id}>`)

    .addField(
      "**Yasağı Kaldırılan Kullanıcı:**",
      `**${user.tag}** - ${user.id}`
    )

    .setTimestamp()

    .setColor("#ff0000")

    .setFooter(`Sunucu: ${guild.name} - ${guild.id}`, guild.iconURL)

    .setThumbnail(guild.iconURL);

  client.channels.cache.get(modlog).send(embed);
});


client.on('message', message => {
  // Data
  // Sa
  var partner = ["partner dm"]

  
    if(partner.includes(message.content.toLowerCase())){
      message.channel.send(`${message.author} **Yetkililere Özelden Text Atınız.**`)
    }
})



client.on('message', message => {
  // Data
  // Sa
  var sa = ["Sa","SA","sa","Sea","sea","SEA","selamın aleyküm","Selamın Aleyküm","SELAMIN ALEYKÜm","selamun aleyküm","Selamun Aleyküm","SELAMUN ALEYKÜM"]

  
    if(sa.includes(message.content.toLowerCase())){
      message.channel.send(`${message.author} **Aleyküm Selam Dostum, Hoşgeldin.**`)
    }
})

client.on('message', message => {
  // Data
  // Sa
  var sa = ["31"]

  
    if(sa.includes(message.content.toLowerCase())){
      message.channel.send(`${message.author} **sj**`)
    }
})
